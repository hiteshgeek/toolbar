// ============================================================================
// TOOLBAR SNAP HINTS
// Visual indicators for snap positions when dragging
// ============================================================================
@use "sass:map";
@use "../../variables" as *;
@use "../../mixins" as *;

// ============================================================================
// SNAP HINTS CONTAINER
// ============================================================================
.toolbar__snap-hints {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: map.get($toolbar-z-index, base) - 1;
  opacity: 0;
  visibility: hidden;
  transition: opacity map.get($toolbar-animation, duration, fast) ease,
    visibility map.get($toolbar-animation, duration, fast) ease;

  &--visible {
    opacity: 1;
    visibility: visible;
  }
}

// ============================================================================
// INDIVIDUAL SNAP HINT
// ============================================================================
.toolbar__snap-hint {
  position: absolute;
  width: 60px;
  aspect-ratio: 1;
  border: 6px dashed var(--toolbar-primary-color);
  border-radius: 50%;
  background: color-mix(in srgb, var(--toolbar-primary-color) 10%, transparent);
  backdrop-filter: blur(4px);

  transition: all map.get($toolbar-animation, duration, fast) ease;
  opacity: 0.4;

  // Add a pulsing animation
  &::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    background: var(--toolbar-primary-color);
    background: #fff;
    border-radius: 50%;
    opacity: 0.6;
    animation: pulse 2s ease-in-out infinite;
  }

  // Active (nearest) snap hint
  &--active {
    opacity: 0.9;
    border-width: 3px;
    border-style: solid;
    transform: scale(1.1);
    background: color-mix(
      in srgb,
      var(--toolbar-primary-color) 20%,
      transparent
    );
    box-shadow: 0 0 20px
      color-mix(in srgb, var(--toolbar-primary-color) 40%, transparent);

    &::before {
      width: 16px;
      height: 16px;
      opacity: 1;
      animation: pulse-active 1s ease-in-out infinite;
    }
  }

  // ============================================================================
  // POSITION VARIANTS
  // ============================================================================

  // Top positions
  &--top-left {
    top: 20px;
    left: 20px;
  }

  &--top-center {
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
  }

  &--top-right {
    top: 20px;
    right: 20px;
  }

  // Center positions
  &--center-left {
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
  }

  &--center {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  &--center-right {
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
  }

  // Bottom positions
  &--bottom-left {
    bottom: 20px;
    left: 20px;
  }

  &--bottom-center {
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
  }

  &--bottom-right {
    bottom: 20px;
    right: 20px;
  }

  // Active state adjustments for centered positions
  &--top-center.toolbar__snap-hint--active {
    transform: translateX(-50%) scale(1.1);
  }

  &--center-left.toolbar__snap-hint--active {
    transform: translateY(-50%) scale(1.1);
  }

  &--center.toolbar__snap-hint--active {
    transform: translate(-50%, -50%) scale(1.1);
  }

  &--center-right.toolbar__snap-hint--active {
    transform: translateY(-50%) scale(1.1);
  }

  &--bottom-center.toolbar__snap-hint--active {
    transform: translateX(-50%) scale(1.1);
  }
}

// ============================================================================
// ANIMATIONS
// ============================================================================
@keyframes pulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.6;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 0.3;
  }
}

@keyframes pulse-active {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0.5;
  }
}

// ============================================================================
// TOOLBAR SNAPPING ANIMATION
// ============================================================================
.toolbar--snapping {
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}
